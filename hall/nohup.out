time="2018-08-06T17:40:16+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:40:16+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:40:16+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:40:16+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:40:16+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:40:16+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:40:16 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:40:16+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:40:16+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:40:16+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:40:16+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:40:16+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:40:16+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:40:16+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:40:16+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:40:16+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:40:22+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:40:22+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:40:22+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:40:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:40:22+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:40:22+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:40:22 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:40:22+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:40:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:40:22+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:40:22+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:40:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:40:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:40:22+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:40:22+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:40:22+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:40:22+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:40:22+08:00" level=error msg="goroutine 23 [running]:\nruntime/debug.Stack(0xc420067b68, 0xf03f00, 0xc4200a79a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc4200a79a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc420201320, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc4200a7950, 0xc420067d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc4200a7950, 0xc420276e10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc420189680, 0xc4200a0cf0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc420204bc0, 0xc4201de500, 0xc420190d00)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:00+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:00+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:00+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:00+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:00+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:00+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:00 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:00+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:00+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:00+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:00+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:00+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:00+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:00+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:00+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:00+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:00+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:00+08:00" level=error msg="goroutine 21 [running]:\nruntime/debug.Stack(0xc420067b68, 0xf03f00, 0xc4202305a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc4202305a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc42008c460, 0xc420209590, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc420230550, 0xc420067d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc420230550, 0xc42021ce10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc4201676e0, 0xc420028dd0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc42021e150, 0xc4201b8640, 0xc42028e100)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:03+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:03+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:03+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:03+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:03+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:03+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:03 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:03+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:03+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:03+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:03+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:03+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:03+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:03+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:03+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:03+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:03+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:03+08:00" level=error msg="goroutine 38 [running]:\nruntime/debug.Stack(0xc420067b68, 0xf03f00, 0xc42023c5f0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc42023c5f0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc42024b590, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc42023c5a0, 0xc420067d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc42023c5a0, 0xc420226e10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc420189660, 0xc4200a0cf0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc42023a170, 0xc4201dc460, 0xc4202ba100)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:10+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:10+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:10+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:10+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:10+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:10+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:10 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:10+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:10+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:10+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:10+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:10+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:10+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:10+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:10+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:10+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:10+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:10+08:00" level=error msg="goroutine 15 [running]:\nruntime/debug.Stack(0xc420069b68, 0xf03f00, 0xc4201df4a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc4201df4a0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc420318e70, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc4201df450, 0xc420069d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc4201df450, 0xc420052e10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc42000c5c0, 0xc420028220, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc420224870, 0xc4201ec6e0, 0xc4201e8a00)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:19+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:19+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:19+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:19+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:19+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:19+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:19 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:19+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:19+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:19+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:19+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:19+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:19+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:19+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:19+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:19+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:19+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:19+08:00" level=error msg="goroutine 4 [running]:\nruntime/debug.Stack(0xc420069b68, 0xf03f00, 0xc4201dc4b0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc4201dc4b0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc42001f440, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc4201dc460, 0xc420069d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc4201dc460, 0xc420055e10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc420189640, 0xc4200a0ce0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc420028180, 0xc4201f8500, 0xc4202e8100)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:22+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:22+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:22+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:22+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:22+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:22 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:22+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:22+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:22+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:22+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:22+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:22+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:22+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:22+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:22+08:00" level=error msg="goroutine 31 [running]:\nruntime/debug.Stack(0xc420063b68, 0xf03f00, 0xc42032a1e0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc42032a1e0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc4201e0150, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc42032a190, 0xc420063d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc42032a190, 0xc42024ce10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc420189640, 0xc4200a0cc0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc42023d3b0, 0xc4202181e0, 0xc420190e00)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
time="2018-08-06T17:41:26+08:00" level=debug msg="setup log" caller="logger.go:98 logger.SetupLog" fields.level=debug file_dir=./log file_name=hall outputErr=true
time="2018-08-06T17:41:26+08:00" level=info msg="using config file" caller="root.go:108 cmd._init" config=config.yml
time="2018-08-06T17:41:26+08:00" level=info msg="服务选项列表" caller="option.go:156 loader.infoOption" consulAddr="127.0.0.1:8500" groupName= healthPort=36302 node=1 params="[]" pprofExposeType= pprofHttpPort=0 redisAddr="127.0.0.1:6379" redisPasswd= rpcAddr=127.0.0.1 rpcCAFile= rpcCAServerName= rpcCertiFile= rpcKeyFile= rpcPort=36301 rpcServerName=hall tags="[]"
time="2018-08-06T17:41:26+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, steve_proto_gaterpc.MessageHandlerServer)" service="*exchanger.receiver"
time="2018-08-06T17:41:26+08:00" level=info msg="redis 配置初始化" caller="factory.go:117 redisfactory.(*factory).init" configs="map[player:{127.0.0.1:6379 }]"
time="2018-08-06T17:41:26+08:00" level=info msg="mysql 配置列表加载完成" caller="mysql.go:49 mysql.(*mysqlEngineMgr).init" configs="map[player:{backuser Sdf123esdf tcp 192.168.7.108:3306 steve map[charset:utf8]  UTC 0  <nil>  <nil> 0s 0s 0s false false true false false false false false false false}]"
2018/08/06 17:41:26 INF    1 (127.0.0.1:4150) connecting to nsqd
time="2018-08-06T17:41:26+08:00" level=info msg="创建消息订阅者" caller="subscriber.go:52 pubsub.CreateSubscriber" func_name=CreateSubscriber nsqlookupd_addrs="[127.0.0.1:4161]"
time="2018-08-06T17:41:26+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpclb_backend_v1.LoadReportServer)" service="*loader.lbReporter"
time="2018-08-06T17:41:26+08:00" level=info msg="start listen..." caller="regist.go:105 loader.startHTTPHealth" http_port=36302
time="2018-08-06T17:41:26+08:00" level=info msg="注册服务到 consul 完成" addr=127.0.0.1 caller="regist.go:87 loader.RegisterServer" consul_addr="127.0.0.1:8500" port=36301 server_id=hall-127.0.0.1-36301 server_name=hall tags="[node_1]"
time="2018-08-06T17:41:26+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, grpc_health_v1.HealthServer)" service="*loader.healthServerImpl"
time="2018-08-06T17:41:26+08:00" level=info msg="注册服务" caller="serverimpl.go:71 sgrpc.(*RPCServerImpl).RegisterService" func_name=RPCServerImpl.RegisterService.register register_func="func(*grpc.Server, user.PlayerDataServer)" service="*user.PlayerDataService"
time="2018-08-06T17:41:26+08:00" level=debug msg="server init succeed ..." caller="core.go:35 core.(*hallCore).Init" name=hallCore.Init
time="2018-08-06T17:41:26+08:00" level=info msg="初始化服务完成" caller="plugin.go:36 plugin.initService" func_name=initService name=hall
time="2018-08-06T17:41:26+08:00" level=info msg="启动 RPC 服务" addr=127.0.0.1 caller="rpc.go:54 loader.runRPCServer" func_name=runRPCServer port=36301
time="2018-08-06T17:41:26+08:00" level=panic msg="启动 RPC 服务失败" addr=127.0.0.1 caller="rpc.go:64 loader.runRPCServer" error="listen tcp 127.0.0.1:36301: bind: address already in use" func_name=runRPCServer port=36301
time="2018-08-06T17:41:26+08:00" level=error msg="goroutine 31 [running]:\nruntime/debug.Stack(0xc420069b68, 0xf03f00, 0xc4203141e0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/debug/stack.go:24 +0xa7\nsteve/serviceloader/loader.recoverPanic()\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:29 +0x48\npanic(0xf03f00, 0xc4203141e0)\n\t/home/zheng/software/go1.10.3.linux-amd64/go/src/runtime/panic.go:502 +0x229\nsteve/vendor/github.com/Sirupsen/logrus.Entry.log(0xc4200a6460, 0xc42001e120, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:126 +0x2d2\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panic(0xc420314190, 0xc420069d68, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:194 +0xaa\nsteve/vendor/github.com/Sirupsen/logrus.(*Entry).Panicln(0xc420314190, 0xc420055e10, 0x1, 0x1)\n\t/home/zheng/go/src/steve/vendor/github.com/Sirupsen/logrus/entry.go:289 +0xd5\nsteve/serviceloader/loader.runRPCServer(0xfbdc20, 0xc420189660, 0xc4200a0cf0, 0x9, 0x8dcd)\n\t/home/zheng/go/src/steve/serviceloader/loader/rpc.go:64 +0x419\nsteve/serviceloader/loader.Run.func1(0xc4202053c0, 0xc4201da820, 0xc420190e00)\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:95 +0xbd\ncreated by steve/serviceloader/loader.Run\n\t/home/zheng/go/src/steve/serviceloader/loader/loader.go:90 +0xc3\n" caller="loader.go:30 loader.recoverPanic"
