---
title: "go语言编码规范(第一版)"
date: 2018-03-30T13:05:09+08:00
author: 安佳玮
draft: false
---

# 代码格式
* 所有代码在 push 前都需要使用 gofmt 工具执行格式化，也就是说所有代码都需要满足 gofmt 的风格；
* 使用VSCode编辑器,VSCode会自动按照gofmt的要求校验代码规范；
* 所有函数如果需要返回 error，error 返回值应该放到最后一个；

# 注释
* 算法级以及难以理解的代码均必须添加详细注释；
* 所有需要导出的符号都需要必要的注释；
* 函数的输入，输出需要必要的注释，例：bool,error 这些周知的则可不用注释
* 除上述外，谨慎使用注释，函数内尽量少使用注释，应该尽量用可读性良好的代码来解释逻辑；
* 英中文混合注释，在英文和中文之间都应该有空格。

# 命名

* 下述所有命名规范对自动生成的代码（如 proto , mockgen 等）不适用。
* 所有标识符的命名只允许使用英文大小写字母，数字和下划线。不允许使用中文、日文或其他符号；
* 不允许使用拼音命名，难以使用英文表述的单词（如麻将中的吃、碰、杠、胡等）除外。
* 标识符的命名均采用驼峰式命名规范，不需要导出的标识符首字母小写，需要导出的标识符（包名例外）首字母大写。
* 所有导出的标识符不允许使用缩写（众所周知的缩写除外）,常量允许使用驼峰命名法。采用全部大写或者全部消息来使用缩写单词，如 ID，URL。而不是 Id, Url

## 包名
* 包名所有符号都为小写单词，不要使用下划线和大写字母；

## 接口名
* 只有（而且将来只会有）单个函数的接口名，使用函数名 + er 作为接口名。如：

```
type Reader interface {
    Read()
}
```

* 拥有（而且将来只会有）两个函数的接口名，接口名字综合两个函数 + er 。如：

```
type ReadWriter interface {
    Read()
    Write()
}
```

* 其他情况的接口名应该采用拥有实际意义的名称。

## 函数命名
* 函数名应该以动词或者副词打头。如 ```registerService```、```wait```、```onTimer```等。
* 这些函数命名不符合规范：

```
totalScore // 应该改为 calcTotalScore 
```


## 变量命名
* 包全局变量使用字母```g```打头，然后接下来的字母大写，如 ```gPlayerCount```，包全局变量不允许使用缩写（众所周知的缩写除外）；
* 函数参数名、返回值名（如果是命名返回值）需要使用有意义的英语单词，不允许使用缩写（众所周知的缩写除外），需要使用小写字母打头；下面命名不符合规范：

```
Pc int  //	不能使用缩写,需要使用小写字母打头
```

* 局部变量在不影响可读性的情况下可以(在名字过长时鼓励)使用缩写；

* 不要使用 panic、log.Fatal; 除非你知道自己在做什么；

## 其他
* 每个package必须有相对应的doc.go需要使用小写字母打头，阐明package的主要作用，功能等

* 麻将的专业术语注释写在使用到的package中的doc.go文件里面,在使用到的地方标明去doc.go中查看注释
